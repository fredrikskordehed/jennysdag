<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jennysdag.se - Vad är det för dag idag?</title>
    <script defer src="https://cloud.umami.is/script.js" data-website-id="831c13a1-9f6e-4f0b-95e4-3dbc20615506"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,400;0,600;0,800;1,800&family=Inter:wght@300;400;600&family=Caveat:wght@600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #000000;
            --accent: #6366f1;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: #ffffff;
            margin: 0;
            /* overflow: hidden; */ /* Ger en app-liknande känsla */
        }

        /* Fullscreen Spotlight */
        .immersive-bg {
            position: fixed;
            inset: 0;
            background: 
                radial-gradient(circle at 50% 50%, #1e1b4b 0%, #000000 100%);
            z-index: -1;
        }

        /* Nike Hero Typography */
        .jenny-hero {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-weight: 500;
            font-style: italic;
            text-transform: uppercase;
            letter-spacing: -0.06em;
            line-height: 0.85;
        }

        .jenny-subhero {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-weight: 800;
            /* font-style: italic; */
            /* text-transform: uppercase; */
            /* letter-spacing: -0.06em; */
            /* line-height: 0.85; */
        }

        .handwritten {
            font-family: 'Caveat', cursive;
        }

        /* Action Button - High Contrast */
        .btn-hero {
            background: #ffffff;
            color: #000000;
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .btn-hero:hover {
            transform: scale(1.1);
            letter-spacing: 0.2em;
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.15);
        }

        /* Layout Elements */
        .corner-element {
            position: fixed;
            padding: 40px;
            z-index: 20;
            pointer-events: none;
        }

        .glass-nav {
            backdrop-filter: blur(10px);
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.05);
        }

        @keyframes revealUp {
            from { opacity: 0; transform: translateY(40px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .reveal {
            animation: revealUp 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }

        /* Shimmer text effect */
        .shimmer {
            background: linear-gradient(90deg, #fff 0%, #444 50%, #fff 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shine 5s linear infinite;
        }

        @keyframes shine {
            to { background-position: 200% center; }
        }

        .btn-speak {
            background: transparent;
            color: rgba(255,255,255,0.5);
            border: 1px solid rgba(255,255,255,0.15);
            font-weight: 600;
            letter-spacing: 0.05em;
            transition: all 0.3s ease;
        }

        .btn-speak:hover {
            color: #fff;
            border-color: rgba(255,255,255,0.4);
        }

        .btn-speak.speaking {
            color: var(--accent);
            border-color: var(--accent);
        }
    </style>
</head>
<body>

    <div class="immersive-bg"></div>

    <!-- UI Overlays (Corners) -->
    <div class="corner-element top-0 left-0">
        <div class="jenny-hero text-2xl tracking-tighter shimmer">JENNYSDAG.SE</div>
    </div>

    <div class="corner-element top-0 right-0 hidden md:block">
        <div class="glass-nav px-6 py-2 rounded-full text-[10px] font-bold tracking-[0.4em] text-slate-400 uppercase">
            Powered by Jennyrativ AI
        </div>
    </div>



    <!-- Main Content Stage -->
    <main class="min-h-screen w-screen flex flex-col items-center justify-center relative px-6 text-center py-20">
        
        <div class="space-y-12 max-w-7xl w-full reveal">
            
            <!-- Context Badge -->
            <div class="flex justify-center mb-8">
                <span id="full-date" class="text-indigo-400 text-xs font-bold tracking-[0.3em] uppercase">Laddar...</span>
            </div>

            <!-- Big Bold Question -->
            <div class="space-y-4">
                <h1 class="jenny-hero text-5xl md:text-7xl text-white mb-8">Vad är det för dag idag?</h1>
                <h2 id="question-text" class="jenny-subhero text-2xl md:text-4xl text-white mb-8">Hämtar dagens firande...</h2>
                <div class="story-container text-slate-400 text-xl md:text-2xl font-light  max-w-2xl mx-auto mt-12">
                    <p class="description" id="story-text" style="text-align: left; white-space: pre-wrap;"></p><span id="cursor" class="cursor hidden" style="background-color: var(--accent);"></span>
                </div>
            </div>

            <!-- Call to Action -->
            <div class="pt-10 flex flex-col items-center gap-4">
                <button id="reveal-btn" class="btn-hero px-16 py-6 rounded-full text-sm md:text-base hidden">
                    Berätta!
                </button>
                <button id="speak-btn" class="btn-speak px-10 py-4 rounded-full text-sm hidden inline-flex items-center gap-2" onclick="speakStory()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></svg>
                    Läs upp
                </button>
            </div>

        </div>

        <!-- Quotes and Footer -->
        <div class="w-full flex flex-col items-center justify-center mt-12 reveal" style="animation-delay: 0.4s;">
            <p class="jenny-note handwritten text-3xl md:text-4xl text-indigo-300 opacity-60 hover:opacity-100 transition-opacity cursor-default">
                "Glöm inte att fira ordentligt!"
            </p>
            <p class="text-[9px] font-bold tracking-[0.5em] text-slate-500 uppercase mt-4">
                Jennyrativ AI ersätter inte den riktiga Jenny. Men gör sitt bästa.
            </p>
        </div>

    </main>

    <script>
        let currentStory = "";
        let isTyping = false;

        async function init() {
            const now = new Date();
            const day = now.getDate();
            const month = now.getMonth() + 1;
            const monthStr = month.toString().padStart(2, '0');
            const dayStr = day.toString().padStart(2, '0');
            
            const monthNames = ["januari", "februari", "mars", "april", "maj", "juni", "juli", "augusti", "september", "oktober", "november", "december"];
            const dayNames = ["Söndag", "Måndag", "Tisdag", "Onsdag", "Torsdag", "Fredag", "Lördag"];
            
            document.getElementById('full-date').innerText = `${dayNames[now.getDay()]} ${day} ${monthNames[now.getMonth()]}`;

            try {
                // Hämtar JSON-fil för aktuell månad, t.ex. "data/01.json"
                const response = await fetch(`data/${monthStr}.json`);
                if (!response.ok) throw new Error('Kunde inte ladda månadsdata');
                
                const monthData = await response.json();
                const todayData = monthData[`${monthStr}-${dayStr}`];

                if (todayData && todayData.events.length > 0) {
                    const count = todayData.events.length;
                    document.getElementById('question-text').innerText = count === 1 
                        ? `Idag har vi en speciell sak på gång. Någon som vet vad?`
                        : `Idag har vi faktiskt ${count} spännande saker att fira!\nNågon som vet vilka?`;
                    
                    // Removed: if (todayData.color) document.documentElement.style.setProperty('--season-color', todayData.color);
                    currentStory = formatStory(todayData.events);
                    document.getElementById('reveal-btn').classList.remove('hidden');
                    document.getElementById('speak-btn').classList.remove('hidden');
                } else {
                    handleEmptyDay();
                }
            } catch (error) {
                console.error(error);
                handleEmptyDay();
            }
        }

        function handleEmptyDay() {
            document.getElementById('question-text').innerText = "Idag verkar vara en helt vanlig (men magisk) vardag!";
            currentStory = "Idag finns ingen officiell temadag i min lista, vilket betyder att vi får uppfinna en själva. 'Ta-en-extra-kaka-dagen' kanske?";
            document.getElementById('reveal-btn').classList.remove('hidden');
            document.getElementById('speak-btn').classList.remove('hidden');
        }

        function formatStory(events) {
            if (events.length === 1) {
                return `Jo, idag är det nämligen ${events[0].title}! \n\n${events[0].desc}`;
            }
            let text = `Jo, lyssna nu! Idag är det först och främst ${events[0].title}! \n\n${events[0].desc}\n\n`;
            for (let i = 1; i < events.length; i++) {
                const prefix = i === events.length - 1 ? "Men OCKSÅ! " : "Och som om det inte vore nog: ";
                text += `${prefix}Det är även ${events[i].title}! ${events[i].desc}\n\n`;
            }
            text += "Visst är det härligt?";
            return text;
        }

        function startStorytelling() {
            if (isTyping) return;
            document.getElementById('reveal-btn').classList.add('hidden');
            document.getElementById('cursor').classList.remove('hidden');
            let i = 0;
            isTyping = true;
            const target = document.getElementById('story-text');
            target.innerText = "";

            function typeWriter() {
                if (i < currentStory.length) {
                    target.innerText += currentStory.charAt(i);
                    i++;
                    const speed = [".", "!", "?"].includes(currentStory.charAt(i-1)) ? 500 : 30;
                    setTimeout(typeWriter, speed);
                } else {
                    isTyping = false;
                    document.getElementById('cursor').classList.add('hidden');
                }
            }
            typeWriter();
        }

        function speakStory() {
            const btn = document.getElementById('speak-btn');
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
                btn.classList.remove('speaking');
                return;
            }
            const utterance = new SpeechSynthesisUtterance(currentStory);
            utterance.lang = 'sv-SE';
            utterance.rate = 0.95;
            btn.classList.add('speaking');
            utterance.onend = () => btn.classList.remove('speaking');
            speechSynthesis.speak(utterance);
        }

        window.onload = init;
        document.getElementById('reveal-btn').addEventListener('click', startStorytelling);
    </script>
</body>
</html>